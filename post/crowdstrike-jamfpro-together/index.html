<!doctype html><html dir=ltr lang=en data-theme class=html><head><title>Crowdstrike and Jamf Pro, Together at last |
Andy James</title><meta charset=utf-8><meta name=generator content="Hugo 0.96.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Andy James"><meta name=description content="
      How to configure Jamf Pro to install Crowdstrike


    "><link rel=stylesheet href=/scss/main.min.5551757e3608c8c17519a404d0c78646f8b4ce68b04e5acc290a21597ce09467.css integrity="sha256-VVF1fjYIyMF1GaQE0MeGRvi0zmiwTlrMKQohWXzglGc=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.69685904d5c2a0c6258d03c207b778c10466edf6cea928cc0164c376b0ad0930.css integrity="sha256-aWhZBNXCoMYljQPCB7d4wQRm7fbOqSjMAWTDdrCtCTA=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.6d585e78d28cce1200d39fb133c92ed83df01738da721d0f48fb6eac62d24e04.css integrity="sha256-bVheeNKMzhIA05+xM8ku2D3wFzjach0PSPturGLSTgQ=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.6b00d96498d59caa0dbcf9b49d30d821915291f2ceb0e19248523c8607ff43fa.css integrity="sha256-awDZZJjVnKoNvPm0nTDYIZFSkfLOsOGSSFI8hgf/Q/o=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png><link rel=canonical href=https://k4ved.com/post/crowdstrike-jamfpro-together/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8=" crossorigin=anonymous></script><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://k4ved.com/images/site-feature-image.png"><meta name=twitter:title content="Crowdstrike and Jamf Pro, Together at last"><meta name=twitter:description content="How to configure Jamf Pro to install Crowdstrike"><meta property="og:title" content="Crowdstrike and Jamf Pro, Together at last"><meta property="og:description" content="How to configure Jamf Pro to install Crowdstrike"><meta property="og:type" content="article"><meta property="og:url" content="https://k4ved.com/post/crowdstrike-jamfpro-together/"><meta property="og:image" content="https://k4ved.com/images/site-feature-image.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-03-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-28T00:00:00+00:00"><meta property="og:site_name" content="Andy James"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Crowdstrike and Jamf Pro, Together at last","headline":"Crowdstrike and Jamf Pro, Together at last","alternativeHeadline":"","description":"
      How to configure Jamf Pro to install Crowdstrike


    ","inLanguage":"en","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/k4ved.com\/post\/crowdstrike-jamfpro-together\/"},"author":{"@type":"Person","name":"Andy James"},"creator":{"@type":"Person","name":"Andy James"},"accountablePerson":{"@type":"Person","name":"Andy James"},"copyrightHolder":{"@type":"Person","name":"Andy James"},"copyrightYear":"2022","dateCreated":"2022-03-28T00:00:00.00Z","datePublished":"2022-03-28T00:00:00.00Z","dateModified":"2022-03-28T00:00:00.00Z","publisher":{"@type":"Organization","name":"Andy James","url":"https://k4ved.com/","logo":{"@type":"ImageObject","url":"https:\/\/k4ved.com\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":["https://k4ved.com/images/site-feature-image.png"],"url":"https:\/\/k4ved.com\/post\/crowdstrike-jamfpro-together\/","wordCount":"735","genre":[],"keywords":["crowdstrike","jamf","tutorials"]}</script></head><body class="body theme--light"><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
."><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/profile.jpg alt="profile picture"><h1 class=sidebar__introduction-title><a href=/>Andy James</a></h1><div class=sidebar__introduction-description><p>Ramblings of a Security Architect</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://www.linkedin.com/in/k4ved rel=me aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://www.twitter.com/RealAndyJames/ rel=me aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:andy@andyjames.org rel=me aria-label=e-mail title=e-mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul><div class=sidebar__introduction><div class=sidebar__introduction-description><p>FCC Callsign: K4VED</p></div></div></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Andy James
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js integrity="sha256-o/0GOK2k487Ch+SaYEtKgoz+8zpmmv5guWV1dh//XPM=" crossorigin=anonymous></script></div></aside><main class=wrapper__main><header class=header><div class=.><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=/about/ title>About Me</a></li><li class=nav__list-item><a href=/contact/ title>Contact</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
."><div class=post__content><h1>Crowdstrike and Jamf Pro, Together at Last</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>3/28/2022</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>4-minute read</span></li></ul><p>As an IT company, securing our users devices was a must to do. When we did our audit on all the platforms we wanted to use we landed on Crowdstrike Falcon. All signed up, access granted, off to install on all our systems using Jamf Pro.</p><p>Thats where the fun began. At the time we started with Crowdstrike they did not have any real documentation for using Jamf Pro, and their support is very clear that they do not support Jamf Pro. They did provide a configuration file, but it was complicated to install, required you to re-sign it, and then didn’t work. A lot of banging my head against my desk to figure out whats going on with their recommended policy.</p><p>Jamf’s support also doesn’t support crowdstrike in return, but was helpful to provide some steps that helped get closer to an install, but they also didn’t work well and depended on the end-users clicking the Crowdstrike Falcon pop-up to get going. This isn’t ideal as not all users are in-front of their computer when pushed, if they did not click in time, the install would fail.</p><p>With all that said, Crowdstrike has now put together some documentation that, with a caveat that I&rsquo;ll talk about at the end, mostly solves the problem. Here are the instructions you need.</p><h2 id=how-to-install-crowdstrike-with-jamf-pro>How to install Crowdstrike with Jamf Pro</h2><h3 id=create-a-new-configuration-policy-for-all-devices>Create a new configuration policy for all devices</h3><p>Edit the sections as follows:</p><p><strong>Privacy Preferences Policy Control</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>App Access
</span></span><span class=line><span class=cl>Identifier: com.crowdstrike.falcon.Agent
</span></span><span class=line><span class=cl>Identifier Type: Bundle ID
</span></span><span class=line><span class=cl>Code Requirement: identifier &#34;com.crowdstrike.falcon.Agent&#34; and anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] /* exists / and certificate leaf[field.1.2.840.113635.100.6.1.13] / exists */ and certificate leaf[subject.OU] = &#34;X9E956P446&#34;
</span></span><span class=line><span class=cl>App or Service: SystemPolicyAllFiles -&gt; Allow
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>App Access
</span></span><span class=line><span class=cl>Identifier: com.crowdstrike.falcon.App
</span></span><span class=line><span class=cl>Identifier Type: Bundle ID
</span></span><span class=line><span class=cl>Code Requirement: identifier &#34;com.crowdstrike.falcon.Agent&#34; and anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] /* exists / and certificate leaf[field.1.2.840.113635.100.6.1.13] / exists */ and certificate leaf[subject.OU] = &#34;X9E956P446&#34;
</span></span><span class=line><span class=cl>App or Service: SystemPolicyAllFiles -&gt; Allow
</span></span></code></pre></div><p><strong>Application & Custom Settings</strong></p><p>In the upload section, let’s setup plist. This will save you from running a script to add the license later</p><p><em>Preference Domain:</em> com.crowdstrike.falcon</p><p>Property List:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;dict&gt;
</span></span><span class=line><span class=cl>  &lt;key&gt;ccid&lt;/key&gt;
</span></span><span class=line><span class=cl>    &lt;string&gt;YOUR CCID&lt;/string&gt;
</span></span><span class=line><span class=cl>&lt;/dict&gt;
</span></span></code></pre></div><p><strong>System Extensions</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Allow users to approve system extensions: Checked
</span></span><span class=line><span class=cl>Display Name: com.crowdstrike.falcon.Agent
</span></span><span class=line><span class=cl>System Extension Type: Allowed System Extensions
</span></span><span class=line><span class=cl>Team Identifier: X9E956P446
</span></span><span class=line><span class=cl>Allowed System Extensions: com.crowdstrike.falcon.Agent
</span></span></code></pre></div><p><strong>Content Filter</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Filter Name: Falcon
</span></span><span class=line><span class=cl>Identifier: com.crowdstrike.falcon.App
</span></span><span class=line><span class=cl>Organization: CrowdStrike, Inc.
</span></span><span class=line><span class=cl>Filter Order: Inspector
</span></span><span class=line><span class=cl>Socket Filter:
</span></span><span class=line><span class=cl>Socket Filter Bundle Identifier: com.crowdstrike.falcon.Agent
</span></span><span class=line><span class=cl>Socket Filter Designated Requirement: identifier &#34;com.crowdstrike.falcon.Agent&#34; and anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] and certificate leaf[field.1.2.840.113635.100.6.1.13] and certificate leaf[subject.OU] = &#34;X9E956P446&#34;
</span></span></code></pre></div><h3 id=create-a-new-configuration-policy-for-all-mac-os-x-catalina>Create a new configuration policy for all Mac OS X Catalina</h3><p><strong>Approved Kernel Extensions</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Allow users to approve kernel extensions: Checked
</span></span><span class=line><span class=cl>Display Name: Crowdstrike, Inc
</span></span><span class=line><span class=cl>TeamID: X9E956P446
</span></span></code></pre></div><h3 id=scoping>Scoping</h3><p>When you scope these two policies, all computers in your organization should get the all computers policy. Using a smart group, you should make a group to narrow down to just Catalina and scope that group to the Catalina policy also. Both policies should be installed on Catalina, but only one on every other OS. If you’re running older than Catalina, you should upgrade them first.</p><h3 id=caveat-while-building-the-install-policy>Caveat while building the install policy</h3><p>Installing is easy, upload the image, create a policy to install that application, and done. No bash scripts for licenses required, installs like every other application, with one exception.</p><p>The Falcon installer doesn’t handle being installed “again”. IE, if you push out new policies or changes to your installer policy, it will simply show all your devices failing. When you dig into the error on Google you will find lots of results, but no real answers. Heres the short version of whats really happening;</p><p>When the installer exits out, it doesn&rsquo;t send an exit code 0. This is because the installer technically did fail, even though it simply just exited because Falcon is already installed. Jamf can&rsquo;t tell what the installer should have done, so it just sees the exit code is not successful, and therefore the install is a failure.</p><p>My recommended approach is to change your policy to install on computers where Falcon is not already installed using smart groups. This makes sure that it’s the first time install. Falcon takes care of updating itself, so no future monitoring in Jamf is required. The smart group to create is as follows:</p><p>Create a new smart group, name it what you want, and use the following criteria</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Application Title is not Falcon.app
</span></span></code></pre></div></div><div class=post__footer><span><a class=tag href=/tags/crowdstrike/>crowdstrike</a><a class=tag href=/tags/jamf/>jamf</a><a class=tag href=/tags/tutorials/>tutorials</a></span></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Andy James
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.a3fd0638ada4e3cec287e49a604b4a828cfef33a669afe60b96575761fff5cf3.js integrity="sha256-o/0GOK2k487Ch+SaYEtKgoz+8zpmmv5guWV1dh//XPM=" crossorigin=anonymous></script></body></html>